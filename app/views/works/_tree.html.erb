<ul id="work_tree">

  <% @work.reifications.each do |r| %>

  <% e=Expression.find(r.expression_id) %>

  <li class="expression" id="expression_<%= r.expression_id %>"> <%= link_to e.anchor_text, e %>

    <ul class="expression_tree_<%= r.expression.id %>"> <% e.manifestations.each do |m| %>

      <li class="manifestation" id="manifestation_<%= m.id %>"> <%= link_to m.anchor_text, m %>
	(<%= m.form_of_carrier %>)

	<ul>

	  <% m.exemplifications.each do |ex| %>
	  <% i = Item.find(ex.item_id) %>

	  <li> <%= link_to i.identifier, i %>
	    (<%= i.call_number %>)
	  </li>

	  <% end %>

	</ul>

      </li>

      <% end %>

    </ul>

  </li>

  <% end %>

</ul>

<% @work.reifications.each do |r| %>

<% e=Expression.find(r.expression_id) %>

<%= sortable_element("expression_tree_#{r.expression.id}", :url => { :action => "order" })
%>

<% end %>


